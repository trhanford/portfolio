/* ==================================================================
   Portfolio Page Styles
   ================================================================== */

body.portfolio-page{
  background:var(--paper);
  color:var(--slate);
}

body.portfolio-page main{
  padding-top:calc(var(--nav-h) + 32px);
}

.portfolio-hero{
  position:relative;
  padding:110px 0 68px;
  background:linear-gradient(180deg, rgba(228,221,204,.9) 0%, rgba(228,221,204,.42) 58%, rgba(228,221,204,0) 100%);
  border-bottom:1px solid rgba(15,17,19,.08);
  overflow:hidden;
}

.portfolio-hero::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-32vh;
  height:44vh;
  background:linear-gradient(180deg, rgba(228,221,204,.32) 0%, rgba(255,255,255,.96) 60%, #ffffff 100%);
  z-index:-2;
}

.portfolio-hero-bg{
  position:absolute;
  inset:-12vh 0 0 0;
  z-index:-3;
  background:linear-gradient(180deg, rgba(228,221,204,1) 0%, rgba(228,221,204,.92) 34%, rgba(228,221,204,.4) 72%, rgba(228,221,204,0) 100%);
  pointer-events:none;
}

.portfolio-hero .hero-inner{
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:32px;
}

@media (max-width:980px){
  .portfolio-hero{padding:96px 0 56px;}
  .portfolio-hero .hero-inner{gap:28px;}
}

.hero-copy .hero-title{
  font-size:clamp(2.5rem, 5vw, 3.8rem);
  font-family:'Playfair Display', Georgia, serif;
  color:var(--slate-strong);
}

.hero-copy .hero-subtitle{
  margin-top:14px;
  font-size:clamp(1.02rem, 2vw, 1.28rem);
  color:var(--muted);
  max-width:36ch;
}

.hero-actions{
  margin-top:32px;
  display:flex;
  align-items:center;
  gap:16px;
}

.start-exploring-btn{
  position:relative;
  display:inline-flex;
  align-items:center;
  gap:12px;
  padding:18px 32px;
  border-radius:999px;
  font-weight:800;
  letter-spacing:.08em;
  text-transform:uppercase;
  background:rgba(228,221,204,.92);
  border:1px solid rgba(43,47,51,.18);
  box-shadow:var(--shadow-1);
  color:var(--slate-strong);
  transition:transform .2s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
}

.hero-actions .start-exploring-btn{
  align-self:flex-start;
  margin-left:-6px;
}

.start-exploring-btn::before,
.start-exploring-btn::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  border:2px solid rgba(43,47,51,.18);
  opacity:0;
  transform:scale(.9);
}

.start-exploring-btn:hover::before{animation:burst 900ms ease-out forwards;}
.start-exploring-btn:hover::after{animation:burst 1200ms 90ms ease-out forwards;}

.start-exploring-btn:hover{
  transform:translateY(-1px);
  box-shadow:var(--shadow-2);
  background:#c4c8ce;
  color:#ffffff;
}

.start-exploring-btn:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:4px;
}

.start-exploring-btn .arrow{
  font-size:1.2rem;
  transition:transform .2s ease;
}

.start-exploring-btn:hover .arrow{transform:translateX(4px);}

@media (max-width:600px){
  .start-exploring-btn{width:100%;justify-content:center;}
  .hero-actions{margin-top:24px;}
  .hero-actions .start-exploring-btn{margin-left:0;}
}

.portfolio-section{
  padding:60px 0 40px;
  border-bottom:1px solid rgba(15,17,19,.06);
}

.portfolio-section:last-of-type{border-bottom:none;padding-bottom:80px;}

.section-head{
  max-width:720px;
  margin-bottom:32px;
}

.section-head h2{
  font-size:clamp(1.8rem, 4vw, 2.8rem);
  font-family:'Playfair Display', Georgia, serif;
  color:var(--slate-strong);
}

.section-head p{
  margin:0;
  color:var(--muted);
  font-size:1rem;
}

.projects-grid{
  display:grid;
  gap:28px;
}

.projects-grid[data-carousel]{
  position:relative;
}

@media (min-width:720px){
  .projects-grid{grid-template-columns:repeat(2, minmax(0, 1fr));}
}

@media (min-width:1180px){
  .projects-grid{grid-template-columns:repeat(2, minmax(0, 1fr));}
}

.project-card{
  display:grid;
  grid-template-columns:160px 1fr;
  grid-template-rows:1fr;
  align-items:stretch;
  gap:20px;
  padding:22px;
  background:#fff;
  border-radius:var(--radius-xl);
  border:1px solid rgba(15,17,19,.08);
  box-shadow:var(--shadow-1);
  transition:transform .25s ease, box-shadow .25s ease, opacity .25s ease;
  position:relative;
}

.projects-grid.carousel-active{
  display:block;
  perspective:1200px;
  height:clamp(380px, 62vh, 520px);
}

.projects-grid.carousel-active .project-card{
  position:absolute;
  top:50%;
  left:50%;
  width:clamp(260px, 42vw, 520px);
  max-width:none;
  height:auto;
  transform-style:preserve-3d;
  transform-origin:center center;
  opacity:0;
  pointer-events:none;
  will-change:transform, opacity, filter, width;
  transition:transform .4s cubic-bezier(.4, 0, .2, 1),
             opacity .35s ease,
             filter .35s ease,
             width .4s cubic-bezier(.4, 0, .2, 1),
             box-shadow .35s ease;
}

.projects-grid.carousel-active .project-card.is-front{
  box-shadow:var(--shadow-2);
}

.projects-grid.carousel-active .project-card::after{
  content:"";
  position:absolute;
  inset:auto 18% -42px 18%;
  height:32px;
  background:radial-gradient(ellipse at center, rgba(0,0,0,.25) 0%, rgba(0,0,0,0) 65%);
  opacity:0;
  transform:translateY(50%);
  pointer-events:none;
}

.projects-grid.carousel-active .project-card.is-front::after{opacity:0.38;}

.project-card.is-animating{
  opacity:0;
  pointer-events:none;
}

.project-card-ghost{
  position:fixed;
  inset:auto;
  margin:0;
  z-index:1600;
  pointer-events:none;
  transform-origin:center center;
  box-shadow:var(--shadow-2);
  border-radius:var(--radius-xl);
  background:#fff;
}

.project-card-ghost::after{
  display:none !important;
}


@media (max-width:900px){
  .projects-grid.carousel-active{
    display:grid;
    gap:28px;
    perspective:none;
    height:auto;
  }

  .projects-grid.carousel-active .project-card{
    position:relative;
    top:auto;
    left:auto;
    width:100%;
    max-width:none;
    transform:none !important;
    opacity:1 !important;
    pointer-events:auto !important;
    filter:none !important;
    box-shadow:var(--shadow-1);
  }

  .projects-grid.carousel-active .project-card::after{display:none;}
}

.project-card:hover{
  transform:translateY(-4px);
  box-shadow:var(--shadow-2);
}

@media (max-width:720px){
  .project-card{grid-template-columns:1fr;}
}

.project-media{
  border-radius:var(--radius-lg);
  overflow:hidden;
  background:var(--taupe);
  display:flex;
  align-items:center;
  justify-content:center;
}

@media (max-width:720px){
  .project-media{min-height:200px;}
}

@media (max-width:520px){
  .project-media{min-height:180px;}
}

.project-media img{
  width:100%;
  height:100%;
  display:block;
  object-fit:cover;
}

.project-media model-viewer{
  width:100%;
  height:100%;
  display:block;
  border:none;
  background:rgba(43,47,51,.04);
  --poster-color:rgba(43,47,51,.82);
  border-radius:inherit;
}

.project-media--viewer{
  padding:0;
}

.project-info{
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.project-info h3{
  margin:0 0 8px;
  font-size:1.25rem;
  font-weight:800;
  color:var(--slate-strong);
}

.project-summary{
  margin:0 0 16px;
  color:var(--muted);
  flex-grow:1;

}

.project-more{
  background:none;
  border:none;
  color:var(--accent-soft);
  font-weight:800;
  font-size:1rem;
  letter-spacing:.02em;
  text-transform:uppercase;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:0;
}

.project-more:hover,.project-more:focus-visible{
  color:var(--slate-strong);
}

.projects-grid--cad .project-card{
  grid-template-columns:200px 1fr;
}

@media (max-width:920px){
  .projects-grid--cad .project-card{grid-template-columns:1fr;}
}

/* -------------------- Modal -------------------- */
.modal{
  position:fixed;
  inset:0;
  z-index:200;
  display:none;
}

.modal.open{display:block;}

.modal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(20,24,28,.55);
  backdrop-filter:blur(6px);
}

.modal-dialog{
  position:relative;
  margin:80px auto;
  max-width:min(960px, calc(100% - 48px));
  background:#fff;
  border-radius:var(--radius-xl);
  padding:32px 32px 40px;
  box-shadow:0 28px 68px rgba(15,17,19,.35);
  border:1px solid rgba(15,17,19,.18);
}

@media (max-width:720px){
  .modal-dialog{margin:60px auto;padding:24px 20px 32px;}
}

.modal-close{
  position:absolute;
  top:16px;
  right:16px;
  width:38px;
  height:38px;
  border-radius:50%;
  border:none;
  background:rgba(228,221,204,.55);
  font-size:1.6rem;
  font-weight:600;
  cursor:pointer;
}

.modal-close:hover,.modal-close:focus-visible{
  background:rgba(228,221,204,.85);
}

.modal-header{
  margin-bottom:20px;
}

.modal-header h2{
  margin:0;
  font-size:clamp(1.6rem, 3vw, 2.4rem);
  color:var(--slate-strong);
}

.modal-subtitle{
  margin:8px 0 0;
  color:var(--muted);
}

.modal-body{
  display:grid;
  gap:24px;
}

.modal-gallery{
  display:flex;
  gap:18px;
  overflow-x:auto;
  padding-bottom:8px;
  scroll-snap-type:x mandatory;
}

.modal-gallery figure{
  margin:0;
  min-width:min(320px, 70vw);
  scroll-snap-align:start;
  border-radius:var(--radius-lg);
  overflow:hidden;
  border:1px solid rgba(15,17,19,.12);
  background:var(--taupe);
  box-shadow:var(--shadow-1);
}

.modal-gallery img{
  display:block;
  width:100%;
  height:auto;
}

.modal-note{
  padding:18px 20px;
  border-radius:var(--radius-lg);
  background:rgba(228,221,204,.45);
  border:1px solid rgba(15,17,19,.12);
  font-size:.95rem;
  color:var(--slate);
}

.modal-note strong{display:block;margin-bottom:6px;}

.modal-viewer{
  width:100%;
  height:420px;
  border-radius:var(--radius-lg);
  overflow:hidden;
  border:1px solid rgba(15,17,19,.14);
  box-shadow:var(--shadow-1);
  background:var(--taupe);
}

.modal-viewer model-viewer{
  width:100%;
  height:100%;
  --poster-color:rgba(43,47,51,.9);
}

.modal-viewer .viewer-placeholder{
  width:100%;
  height:100%;
  display:grid;
  place-items:center;
  padding:32px;
  text-align:center;
  color:var(--muted);
  font-weight:600;
  background:rgba(43,47,51,.05);
}

.modal-viewer .viewer-placeholder strong{
  display:block;
  margin-bottom:8px;
  color:var(--slate-strong);
}

body.modal-open{overflow:hidden;}
